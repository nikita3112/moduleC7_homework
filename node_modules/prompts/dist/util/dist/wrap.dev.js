'use strict';
/**
 * @param {string} msg The message to wrap
 * @param {object} opts
 * @param {number|string} [opts.margin] Left margin
 * @param {number} opts.width Maximum characters per line including the margin
 */

module.exports = function (msg) {
  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
  var tab = Number.isSafeInteger(parseInt(opts.margin)) ? new Array(parseInt(opts.margin)).fill(' ').join('') : opts.margin || '';
  var width = opts.width;
  return (msg || '').split(/\r?\n/g).map(function (line) {
    return line.split(/\s+/g).reduce(function (arr, w) {
      if (w.length + tab.length >= width || arr[arr.length - 1].length + w.length + 1 < width) arr[arr.length - 1] += " ".concat(w);else arr.push("".concat(tab).concat(w));
      return arr;
    }, [tab]).join('\n');
  }).join('\n');
};