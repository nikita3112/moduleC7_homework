"use strict";

var conversions = require("webidl-conversions");

var utils = require("./utils.js");

exports.convert = function convert(value) {
  var _ref = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {},
      _ref$context = _ref.context,
      context = _ref$context === void 0 ? "The provided value" : _ref$context;

  if (!utils.isObject(value)) {
    throw new TypeError("".concat(context, " is not an object."));
  }

  function callTheUserObjectsOperation(event) {
    var thisArg = utils.tryWrapperForImpl(this);
    var O = value;
    var X = O;

    if (typeof O !== "function") {
      X = O["handleEvent"];

      if (typeof X !== "function") {
        throw new TypeError("".concat(context, " does not correctly implement EventListener."));
      }

      thisArg = O;
    }

    event = utils.tryWrapperForImpl(event);
    var callResult = Reflect.apply(X, thisArg, [event]);
  }

  callTheUserObjectsOperation[utils.wrapperSymbol] = value;
  callTheUserObjectsOperation.objectReference = value;
  return callTheUserObjectsOperation;
};

exports.install = function (globalObject, globalNames) {};