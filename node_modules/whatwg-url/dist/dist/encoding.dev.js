"use strict";

var _require = require("util"),
    TextEncoder = _require.TextEncoder,
    TextDecoder = _require.TextDecoder; // Handle browserify's lack of support (https://github.com/browserify/node-util/issues/46), which
// is important for the live viewer:


if (!TextEncoder) {
  TextEncoder = global.TextEncoder;
}

if (!TextDecoder) {
  TextDecoder = global.TextDecoder;
}

var utf8Encoder = new TextEncoder();
var utf8Decoder = new TextDecoder("utf-8", {
  ignoreBOM: true
});

function utf8Encode(string) {
  return utf8Encoder.encode(string);
}

function utf8DecodeWithoutBOM(bytes) {
  return utf8Decoder.decode(bytes);
}

module.exports = {
  utf8Encode: utf8Encode,
  utf8DecodeWithoutBOM: utf8DecodeWithoutBOM
};