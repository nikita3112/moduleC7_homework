'use strict';

var detectNewline = function detectNewline(string) {
  if (typeof string !== 'string') {
    throw new TypeError('Expected a string');
  }

  var newlines = string.match(/(?:\r?\n)/g) || [];

  if (newlines.length === 0) {
    return;
  }

  var crlf = newlines.filter(function (newline) {
    return newline === '\r\n';
  }).length;
  var lf = newlines.length - crlf;
  return crlf > lf ? '\r\n' : '\n';
};

module.exports = detectNewline;

module.exports.graceful = function (string) {
  return typeof string === 'string' && detectNewline(string) || '\n';
};